@전투_행동선택
#DIM DYNAMIC ㄱ = 0
#DIM DYNAMIC ㄴ = 0
#DIM DYNAMIC 전턴아무것도안했는지여부 = 1, 1
#DIM DYNAMIC ㅌ = 0
#DIM DYNAMIC ㅌ_ = 1
#DIMS DYNAMIC ㅌㅌ
#DIMS DYNAMIC ㅌㅌㅌ
ㅌㅌ = %CSTR:1:이름%
ㅌㅌㅌ = %CSTR:(캐릭터선택):이름%
IF 적행동수동선택모드 == 1
	ㅌ = 1
	ㅌ_ = 0
	ㅌㅌ = %CSTR:(캐릭터선택):이름%
	ㅌㅌㅌ = %CSTR:1:이름%
ENDIF

;#DIMS 신체표현 = "입", "왼손", "오른손", "왼쪽 유두", "오른쪽 유두", "클리", "질", "왼다리", "오른다리"
;#DIMS 행동표현 = "", "을 애무하고 있다" , "에서 떨어진다" , "을 붙잡고 있다" , "을 막고 있다"
;#DIMS 행동예약표현 = "", "을 애무할 것이다" , "에서 떨어질 것이다" , "을 붙잡을 것이다" , "을 막을 것이다"
$전투_행동선택_

CALL 파라미터표시

FOR ㄱ, 0, 5
	IF 부위별행동:ㅌ:ㄱ:행동도구 == 999
		부위별행동대사:ㅌ:행동도구 = %ㅌㅌ%의 %신체표현:ㅌ:행동도구%은 아무것도 하지 않고 있다
	ELSE
		FOR ㄴ, 0, 9
			IF 부위별행동:ㅌ:ㄱ:행동도구 == ㄴ
				부위별행동대사:ㅌ:행동도구 = %ㅌㅌ%의 %신체표현:ㅌ:행동도구%은 %ㅌㅌㅌ%의 %신체표현:ㅌ_:ㄴ% %행동표현:ㄱ%
				SIF 전턴아무것도안했는지여부:1 == 1
					전턴아무것도안했는지여부:0 = 0
				GOTO 대사표현완료
			ENDIF
		NEXT
	ENDIF
NEXT
$대사표현완료
전턴아무것도안했는지여부:1 = 0

FOR ㄱ, 0, 5
	IF 부위별행동시도:ㅌ:ㄱ:행동도구 == 999
		부위별행동대사:ㅌ:행동도구 = %ㅌㅌ%의 %신체표현:ㅌ:행동도구%은 아무것도 하지 않고 있다
	ELSE
		FOR ㄴ, 0, 9
			IF 부위별행동시도:ㅌ:ㄱ:행동도구 == ㄴ
				부위별행동대사:ㅌ:행동도구 = %ㅌㅌ%의 %신체표현:ㅌ:행동도구%은 %ㅌㅌㅌ%의 %신체표현:ㅌ_:ㄴ% %행동예약표현:ㄱ%
				GOTO 대사예약표현완료
			ENDIF
		NEXT
	ENDIF
NEXT
$대사예약표현완료



;전투자세
;100의자리 0 : 보통 //// 1 : 남성상위 //// 2 : 여성상위
;10의자리 0 : 직립 //// 1 : 덮침 //// 2 : 덮침_하체공략 //// 3 : 69 //// 4 : 삽입
;1의자리  0 : 평등 //// 1 : 우위 //// 2 : 압도우위 ///// 하체공략*삽입에서만 사용
;000 : 직립 //// 101 : 직립_남성기습 //// 201 : 직립_여성기습
;110 : 남성덮침 //// 210 : 여성덮침 //// 111 : 남성후덮침 //// 211 : 여성후덮침
;120 : 커닐 //// 121 : 내리꽂기커닐 //// 122 : 후방_내리꽂기커닐
;220 : 펠라파이 //// 221 : 하체묶기파이 //// 222 : 후방_내리꽂기파이
;040 : 다리꼬아삽입 //// 140 : 정상위 //// 141 : 후배위 //// 142 : 후방교배프레스
;;;;;;;;;;;;;;;;;;; /// 240 : 대면좌위 //// 241 : 기승위 //// 242 : 아마존프레스
SELECTCASE 전투자세
;0 : M // 1 : LH // 2 : RH // 3 : B // 4 : C // 5 : V // 6 : L  	//// 	7 : A // 8: MB /
	CASE 0
	;직립
		부위별위치:0:0 = 09000000 + ( %CFLAG:1:신장% + 5 ) * 100
		부위별위치:0:1 = 09000000 + ( %CFLAG:1:신장% + 4 )
		부위별위치:0:2 = 부위별위치:0:1
		부위별위치:0:3 = 09000000 + ( %CFLAG:1:신장% + 4 )
		부위별위치:0:8 = 09000000 + ( %CFLAG:1:신장% + 3 )
		부위별위치:0:4 = 09000000 + ( %CFLAG:1:신장% + 2 )
		부위별위치:0:7 = 00000000 + ( %CFLAG:1:신장% + 2 )
;		부위별위치:0:5 = 125000 + ( %CFLAG:1:신장% / 6 * 2  ////남캐
		부위별위치:0:6 = 09000000 + ( %CFLAG:1:신장% + 1 )
		
		부위별위치:1:0 = 11000000 + ( %CFLAG:(캐릭터선택):신장% + 5 )
		부위별위치:1:1 = 11000000 + ( %CFLAG:(캐릭터선택):신장% + 4 )
		부위별위치:1:2 = 부위별위치:0:1
		부위별위치:1:3 = 11000000 + ( %CFLAG:(캐릭터선택):신장% + 4 )
		부위별위치:1:8 = 11000000 + ( %CFLAG:(캐릭터선택):신장% + 3 )
		부위별위치:1:4 = 11000000 + ( %CFLAG:(캐릭터선택):신장% + 2 )
		부위별위치:1:5 = 20000000 + ( %CFLAG:(캐릭터선택):신장% + 2 )
		부위별위치:1:7 = 20000000 + ( %CFLAG:(캐릭터선택):신장% + 2 )
		부위별위치:1:6 = 11000000 + ( %CFLAG:(캐릭터선택):신장% + 1 )

;;;;;;;;;;;;;;;;;;;;;;;    M  LH  RH   B   C   V  LL   A  MB   // 10 : 회 // 1 : 애 // 10 : 차 // 1 : 구		
	CASE 1
ENDSELECT
;1거리일 때, 0 : 1 // 1 : 1.41 // 2 : 2.23 // 3 : 3.16 // 4 : 4.12
;2거리일 때, 0 : 2 // 1 : 2.23 // 2 : 2.82 // 3 : 3.60 // 4 : 4.47
SELECTCASE 행동도구
;입 행동선택지 설정
	CASE 0
		FOR ㄱ, 0, 9
			IF 부위거리계산(부위별위치:ㅌ:0, 부위별위치:ㅌ_:ㄱ) <= 250
				SIF ( 행동선택지:0:0:ㄱ % 10 == 0 ) && (ㄱ != 1) && (ㄱ != 2) && (ㄱ != 6) && (ㄱ != 8)
					행동선택지:0:0:ㄱ = 11
				SIF 부위거리계산(부위별위치:ㅌ:0, 부위별위치:ㅌ_:ㄱ) <= 150
					행동선택지:0:0:ㄱ = 행동선택지:0:0:ㄱ - 10
			ENDIF
		NEXT
;팔 행동선택지 설정
	CASE 1
		FOR ㄱ, 0, 9
			IF 부위거리계산(부위별위치:ㅌ:0, 부위별위치:ㅌ_:ㄱ) <= 400
				SIF ( 행동선택지:0:0:ㄱ % 10 == 0 ) && (ㄱ != 0) && (ㄱ != 6)
					행동선택지:0:0:ㄱ = 11
			ENDIF
		NEXT
	CASE 2
	CASE 3
ENDSELECT

PRINTFORML \n\n
PRINTFORML %부위별행동대사:ㅌ:행동도구%\n\n

FOR ㄱ, 0, 9
;				애무 가능									전턴 애무 안함					이턴 애무시도 안함
	IF ( (행동선택지:0:행동도구:ㄱ) % 10 == 1 ) && (부위별행동:ㅌ:1:행동도구 != ㄱ) && (부위별행동시도:ㅌ:1:행동도구 != ㄱ)
		PRINTFORML [{100+ㄱ}] %신체표현:ㅌ_:ㄱ% 을(를) 애무한다
		PRINTFORML (효과 표시) \n
	ENDIF
;					회피 가능					&&	(		전턴 애무함				||		이턴 애무시도함			 	||		전턴 구속함					||		이턴 구속시도함				||				전턴 차단함			||		이턴 차단시도함			)
	IF ( (행동선택지:0:행동도구:ㄱ) / 10 == 1 ) && ( (부위별행동:ㅌ:1:행동도구 == ㄱ) || (부위별행동시도:ㅌ:1:행동도구 == ㄱ) || (부위별행동:ㅌ:3:행동도구 == ㄱ) || (부위별행동시도:ㅌ:3:행동도구 == ㄱ) || (부위별행동:ㅌ:4:행동도구 == ㄱ) ||	(부위별행동시도:ㅌ:4:행동도구 == ㄱ)	)
		PRINTFORML [{200+ㄱ}] %신체표현:ㅌ_:ㄱ% 에서 떨어진다. \n
	ENDIF
;		(			구속 가능					&&			전턴 구속 안함		&&			이턴 구속시도 안함			&&			적이 애무함			) || 목표물이 몸통	&&			전턴 구속 안함		&&			이턴 구속시도 안함			&&			구속 가능
	IF ( ( (행동선택지:1:행동도구:ㄱ) % 10 == 1 ) && (부위별행동:ㅌ:3:행동도구 != ㄱ) && (부위별행동시도:ㅌ:3:행동도구 != ㄱ) && (부위별행동:ㅌ:1:ㄱ != 999) ) || ( (ㄱ == 10) && (부위별행동:ㅌ:3:행동도구 != ㄱ) && (부위별행동시도:ㅌ:3:행동도구 != ㄱ) && ( (행동선택지:1:행동도구:ㄱ) % 10 == 1 ) )
		PRINTFORML [{300+ㄱ}] %신체표현:ㅌ_:ㄱ% 을(를) 구속한다 \n
	ENDIF
;					차단 가능								전턴 차단 안함 		&&			이턴 차단시도 안함	
	IF ( (행동선택지:1:행동도구:ㄱ) / 10 == 1 ) && (부위별행동:ㅌ:4:행동도구 != ㄱ) && (부위별행동시도:ㅌ:4:행동도구 != ㄱ)
		PRINTFORML [{400+ㄱ}] %신체표현:ㅌ_:ㄱ% 을(를) 차단한다. \n
	ENDIF
NEXT

PRINTFORML [999] 다른 행동을 선택한다\n

$입력선택_행동부위
INPUT
IF RESULT == 999
	CALL 전투
ELSEIF (RESULT >= 100) && (RESULT <= 998)
	IF (전턴아무것도안했는지여부:0 == 1) && ((RESULT/100) == 2)
;;;;;;;아무것도 안한 상태에서 회피하면 이전과 똑같이 '아무것도 안하고 있다' 라고 표시
		CALL 행동시도초기화_후_행동시도선택, ㅌ, (RESULT/100), 행동도구, 999
	ELSE
		CALL 행동시도초기화_후_행동시도선택, ㅌ, (RESULT/100), 행동도구, (RESULT % 100)
	ENDIF
	GOTO 전투_행동선택_
ELSE
	GOTO 입력선택_행동부위
ENDIF

;;;;;;;;;;;;;;;;;;;;;;;;;;캐릭터, 종류, 도구, 판단
@행동선택초기화_후_행동선택, ARG, ARG:1, ARG:2, ARG:3
부위별행동:(ARG):4:행동도구 = 999
부위별행동:(ARG):1:행동도구 = 999
부위별행동:(ARG):2:행동도구 = 999
부위별행동:(ARG):3:행동도구 = 999
부위별행동:(ARG):(ARG:1):(ARG:2) = ARG:3

@행동시도초기화_후_행동시도선택, ARG, ARG:1, ARG:2, ARG:3
부위별행동시도:(ARG):4:행동도구 = 999
부위별행동시도:(ARG):1:행동도구 = 999
부위별행동시도:(ARG):2:행동도구 = 999
부위별행동시도:(ARG):3:행동도구 = 999
부위별행동시도:(ARG):(ARG:1):(ARG:2) = ARG:3

@부위거리계산, ARG, ARG:1
#FUNCTION
#DIM DYNAMIC ㄱ
#DIM DYNAMIC ㄴ
#DIM DYNAMIC ㄷ
ㄱ = (ARG % 10000) - (ARG:1 % 10000)
ㄴ = (ARG / 10000) - (ARG:1 / 10000)
ㄷ = sqrt ( (ㄱ * ㄱ) + (ㄴ * ㄴ) )
RETURNF ㄷ
;부위별행동:ㅌ:ㄱ:행동도구
;  주체, 종류, 행동도구
;@행위대사, ARG
[SKIPSTART]
		부위별위치:0:0 = 125000 + ( %CFLAG:1:신장% / 8 * 7 )
		부위별위치:0:1 = 125000 + ( %CFLAG:1:신장% / 8 * 6 )
		부위별위치:0:2 = 부위별위치:0:1
		부위별위치:0:3 = 125000 + ( %CFLAG:1:신장% / 8 * 6 )
		부위별위치:0:4 = 125000 + ( %CFLAG:1:신장% / 8 * 4 )
;		부위별위치:0:5 = 125000 + ( %CFLAG:1:신장% / 6 * 2  ////남캐
		부위별위치:0:6 = 125000 + ( %CFLAG:1:신장% / 8 * 3 )
		부위별위치:0:7 = 000000 + ( %CFLAG:1:신장% / 8 * 4 )
		부위별위치:0:8 = 125000 + ( %CFLAG:1:신장% / 8 * 5 )

		부위별위치:0:0 = 175000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 7 )
		부위별위치:0:1 = 175000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 6 )
		부위별위치:0:2 = 부위별위치:0:1
		부위별위치:0:3 = 175000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 6 )
		부위별위치:0:4 = 175000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 4 )
		부위별위치:0:5 = 300000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 4 )
		부위별위치:0:6 = 175000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 3 )
		부위별위치:0:7 = 300000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 4 )
		부위별위치:0:8 = 175000 + ( %CFLAG:(캐릭터선택):신장% / 8 * 5 )
		; 175 기준 //// M : 153 // B : 131 // MB : 109 // C : 87 // L : 65
		; 120 기준 //// M : 105 // B : 90 // MB : 75 // C : 50 // L : 45

;;;; 구체적인 수치 기입 포기하고 신장 1~5 단계별로만 분류 및 부위도 단계별 분류
[SKIPEND]
